import{$ as e,a0 as t,f as s,W as o,a,_ as l,w as r,t as n,q as c,k as i,g as m,b as d,c as h,e as p}from"./shell-676e2013.js";import{s as u,x as w,h as f,I as y}from"./icon-8c4e3009.js";import"./faceplate-modal-2d019896.js";import{c as g}from"./commentsPage-082fe27c.js";const b=e=>e?.[0]?.message??"Something went wrong",v=s(o(u));let C=class extends v{constructor(){super(...arguments),this.commentId="",this.isDeleting=!1}openModalForComment(e){this.commentId=e,this.modal?.showModal()}closeModal(){this.modal?.close()}async deleteCurrentComment(){try{const s={commentId:this.commentId};this.isDeleting=!0,await(async s=>{const o={input:s},{data:a,errors:l}=await e({operation:t.DeleteComment,variables:o});if(l?.length)throw new Error(b(l));const{deleteComment:r}=a;if(!r?.ok)throw new Error(b(r?.errors));return r?.ok})(s),this.closeModal(),this.publish(c.CommentDeleted,s),this.showSuccessAlert(),this.trackEvent(g())}catch(e){this.showErrorAlert()}this.isDeleting=!1}showSuccessAlert(){this.showAlert("Comment deleted successfully",i.notice)}showErrorAlert(){this.showAlert("Unable to delete comment",i.error)}showAlert(e,t){const s=m("faceplate-alert",{level:t,message:e});this.dispatchEvent(s)}render(){return w`<faceplate-modal class="max-w-[calc(100vw-var(--size-2xl))] z-10"> <span slot="title">${"Delete comment?"}</span> <span>${"Are you sure you want to delete your comment? You can't undo this."}</span> ${d({appearance:"destructive",attributes:{className:"embed-m:flex-1",onclick:this.deleteCurrentComment,id:"deleteBtn",disabled:this.isDeleting,slot:"primaryButton"},children:"Delete"})} ${d({appearance:"secondary",attributes:{className:"embed-m:flex-1",onclick:this.closeModal,id:"backBtn",slot:"secondaryButton"},children:"Cancel"})} ${d({appearance:"secondary",attributes:{className:"absolute right-0",onclick:this.closeModal,slot:"closeButton",id:"closeBtn"},leadingIcon:f({size:y.Small}),size:h.Small})} </faceplate-modal>`}};C.styles=[a],l([r("faceplate-modal",!0)],C.prototype,"modal",void 0),l([n()],C.prototype,"commentId",void 0),l([n()],C.prototype,"isDeleting",void 0),C=l([p("shreddit-comment-deletion-modal")],C);
//# sourceMappingURL=comment-deletion-modal-client-js-cbc155d7.js.map
